---
net:
  domain: lab.local
  subdomain: test
  cluster_cidr: 10.128.0.0/14
  cluster_prefx: 23
  service: 172.30.0.0/16

bootstrap:
  - name: bootstrap
    ip: 172.16.0.100
    mac: "01"
master:
  - name: master-0
    ip: 172.16.0.101
    mac: "02"
    etcd_id: 0
  - name: master-1
    ip: 172.16.0.102
    mac: "03"
    etcd_id: 1
  - name: master-2
    ip: 172.16.0.103
    mac: "04"
    etcd_id: 2
worker:
  - name: worker-0
    ip: 172.16.0.104
    mac: "05"
  - name: worker-1
    ip: 172.16.0.105
    mac: "06"

spec_bootstrap:
  cpu: 4
  ram: 12288
  disk: 150
spec_master:
  num_master: 3
  cpu: 4
  ram: 12288
  disk: 150
spec_worker:
  num_worker: 0
  cpu: 2
  ram: 8192
  disk: 150

# Download URLs
# kernel
# for 4.2, 4.3:     rhcos-{{ ocp.version }}-x86_64-installer-kernel
# for 4.4, 4.5:     rhcos-{{ ocp.version }}-x86_64-installer-kernel-x86_64
# initramfs
# for 4.2, 4.3:     rhcos-{{ ocp.version }}-x86_64-installer-initramfs.img
# for 4.4, 4.5:     rhcos-{{ ocp.version }}-x86_64-installer-initramfs.x86_64.img
# bios
# for 4.2:          rhcos-{{ ocp.version }}-x86_64-metal-bios.raw.gz
# for 4.3:          rhcos-{{ ocp.version }}-x86_64-metal.raw.gz
# for 4.4, 4.5:     rhcos-{{ ocp.version }}-x86_64-metal.x86_64.raw.gz
config:
  # rhcos_kernel:    "rhcos-{{ ocp.version }}-x86_64-installer-kernel-x86_64"
  # rhcos_initramfs: "rhcos-{{ ocp.version }}-x86_64-installer-initramfs.x86_64.img"
  # rhcos_bios:      "rhcos-{{ ocp.version }}-x86_64-metal.x86_64.raw.gz"
  rhcos_kernel: >-
    {%- if   ocp.version | regex_search("^4\.+([2-3])\.") -%}     rhcos-{{ ocp.version }}-x86_64-installer-kernel
    {%- elif ocp.version | regex_search("^4\.+([4-5])\.") -%}     rhcos-{{ ocp.version }}-x86_64-installer-kernel-x86_64
    {%- else -%}                                                  rhcos-{{ ocp.version }}-x86_64-installer-kernel-x86_64
    {%- endif -%}
  rhcos_initramfs: >-
    {%- if   ocp.version | regex_search("^4\.+([2-3])\.") -%}     rhcos-{{ ocp.version }}-x86_64-installer-initramfs.img
    {%- elif ocp.version | regex_search("^4\.+([4-5])\.") -%}     rhcos-{{ ocp.version }}-x86_64-installer-initramfs.x86_64.img
    {%- else -%}                                                  rhcos-{{ ocp.version }}-x86_64-installer-initramfs.x86_64.img
    {%- endif -%}
  rhcos_bios: >-
    {%- if   ocp.version | regex_search("^4\.2\.") -%}            rhcos-{{ ocp.version }}-x86_64-metal-bios.raw.gz
    {%- elif ocp.version | regex_search("^4\.3\.") -%}            rhcos-{{ ocp.version }}-x86_64-metal.raw.gz
    {%- elif ocp.version | regex_search("^4\.+([4-5])\.") -%}     rhcos-{{ ocp.version }}-x86_64-metal.x86_64.raw.gz
    {%- else -%}                                                  rhcos-{{ ocp.version }}-x86_64-metal.x86_64.raw.gz
    {%- endif -%}
  ocp_installer:   "openshift-install-linux-{{ ocp.latest_version }}.tar.gz"
  ocp_client:      "openshift-client-linux-{{ ocp.latest_version }}.tar.gz"

url:
  rhcos_kernel_url:    "{{ static.rhcos_base_url }}/{{ config.rhcos_kernel  }}"
  rhcos_initramfs_url: "{{ static.rhcos_base_url }}/{{ config.rhcos_initramfs }}"
  rhcos_bios_url:      "{{ static.rhcos_base_url }}/{{ config.rhcos_bios }}"
  ocp_installer_url:   "{{ static.clients_base_url }}/{{ config.ocp_installer }}"
  ocp_client_url:      "{{ static.clients_base_url }}/{{ config.ocp_client }}"
  sha256_dep_url:      "{{ static.rhcos_base_url }}/sha256sum.txt"
  sha256_client_url:   "{{ static.clients_base_url }}/sha256sum.txt"

static:
  rhcos_base_url:   "https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/{{ ocp.version_dir }}"
  clients_base_url: "https://mirror.openshift.com/pub/openshift-v4/clients/ocp/{{ ocp.latest_version }}"

